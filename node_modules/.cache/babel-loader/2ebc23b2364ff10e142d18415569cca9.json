{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bilous/Projects/umka/marvel_starter/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bilous/Projects/umka/marvel_starter/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bilous/Projects/umka/marvel_starter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useCallback}from\"react\";export var useHttp=function useHttp(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var request=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var method,body,headers,response,data,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:\"GET\";body=_args.length>2&&_args[2]!==undefined?_args[2]:null;headers=_args.length>3&&_args[3]!==undefined?_args[3]:{\"Content-Type\":\"aplication/json\"};setLoading(true);_context.prev=4;_context.next=7;return fetch(url,{method:method,body:body,headers:headers});case 7:response=_context.sent;if(response.ok){_context.next=10;break;}throw new Error(\"Could not fetch \".concat(url,\", status: \").concat(response.status));case 10:_context.next=12;return response.json();case 12:data=_context.sent;setLoading(false);return _context.abrupt(\"return\",data);case 17:_context.prev=17;_context.t0=_context[\"catch\"](4);setLoading(false);setError(_context.t0.message);throw _context.t0;case 22:case\"end\":return _context.stop();}}},_callee,null,[[4,17]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var clearError=useCallback(function(){return setError(null);},[]);return{loading:loading,request:request,error:error,clearError:clearError};};","map":{"version":3,"names":["useState","useCallback","useHttp","loading","setLoading","error","setError","request","url","method","body","headers","fetch","response","ok","Error","status","json","data","message","clearError"],"sources":["/Users/bilous/Projects/umka/marvel_starter/src/hooks/http.hook.js"],"sourcesContent":["import {useState, useCallback} from \"react\";\n\nexport const useHttp = () => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n\n    const request = useCallback(async (url, method = \"GET\", body = null, headers = {\"Content-Type\": \"aplication/json\"}) => {\n        setLoading(true);\n        try {\n            const response = await fetch(url, {method, body, headers});\n            if (!response.ok) {\n                throw new Error(`Could not fetch ${url}, status: ${response.status}`);\n            }\n            const data = await response.json();\n            setLoading(false);\n            return data;\n        } catch (e) {\n            setLoading(false);\n            setError(e.message);\n            throw e;\n        }\n    }, []);\n    const clearError = useCallback(() => setError(null), [])\n\n    return {loading, request, error, clearError}\n};"],"mappings":"gZAAA,OAAQA,QAAR,CAAkBC,WAAlB,KAAoC,OAApC,CAEA,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAU,EAAM,CACzB,cAA8BF,QAAQ,CAAC,KAAD,CAAtC,wCAAOG,OAAP,eAAgBC,UAAhB,eACA,eAA0BJ,QAAQ,CAAC,IAAD,CAAlC,yCAAOK,KAAP,eAAcC,QAAd,eAEA,GAAMC,QAAO,CAAGN,WAAW,4FAAC,iBAAOO,GAAP,0KAAYC,MAAZ,+CAAqB,KAArB,CAA4BC,IAA5B,+CAAmC,IAAnC,CAAyCC,OAAzC,+CAAmD,CAAC,eAAgB,iBAAjB,CAAnD,CACxBP,UAAU,CAAC,IAAD,CAAV,CADwB,sCAGGQ,MAAK,CAACJ,GAAD,CAAM,CAACC,MAAM,CAANA,MAAD,CAASC,IAAI,CAAJA,IAAT,CAAeC,OAAO,CAAPA,OAAf,CAAN,CAHR,QAGdE,QAHc,kBAIfA,QAAQ,CAACC,EAJM,+BAKV,IAAIC,MAAJ,2BAA6BP,GAA7B,sBAA6CK,QAAQ,CAACG,MAAtD,EALU,gCAODH,SAAQ,CAACI,IAAT,EAPC,SAOdC,IAPc,eAQpBd,UAAU,CAAC,KAAD,CAAV,CARoB,gCASbc,IATa,4DAWpBd,UAAU,CAAC,KAAD,CAAV,CACAE,QAAQ,CAAC,YAAEa,OAAH,CAAR,CAZoB,uFAAD,+DAexB,EAfwB,CAA3B,CAgBA,GAAMC,WAAU,CAAGnB,WAAW,CAAC,iBAAMK,SAAQ,CAAC,IAAD,CAAd,EAAD,CAAuB,EAAvB,CAA9B,CAEA,MAAO,CAACH,OAAO,CAAPA,OAAD,CAAUI,OAAO,CAAPA,OAAV,CAAmBF,KAAK,CAALA,KAAnB,CAA0Be,UAAU,CAAVA,UAA1B,CAAP,CACH,CAvBM"},"metadata":{},"sourceType":"module"}