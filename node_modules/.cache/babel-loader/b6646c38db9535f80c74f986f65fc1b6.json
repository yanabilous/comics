{"ast":null,"code":"import _slicedToArray from\"/Users/bilous/Projects/umka/marvel_starter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import MarvelService from\"../../services/MarvelService\";import\"./randomChar.scss\";import mjolnir from\"../../resources/img/mjolnir.png\";import Spinner from\"../spinner/Spinner\";import ErrorMessage from\"../errorMessage/ErrorMessage\";import useMarvelService from\"../../services/MarvelService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RandomChar=function RandomChar(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),char=_useState2[0],setChar=_useState2[1];var _useMarvelService=useMarvelService(),loading=_useMarvelService.loading,error=_useMarvelService.error,getCharacter=_useMarvelService.getCharacter,clearError=_useMarvelService.clearError;useEffect(function(){updateChar();var timerId=setInterval(updateChar,60000);return function(){clearInterval(timerId);};},[]);var onCharLoaded=function onCharLoaded(char){setChar(char);};var updateChar=function updateChar(){clearError();var id=Math.floor(Math.random()*(1011400-1011000)+1011000);getCharacter(id).then(onCharLoaded);};var errorMessage=error?/*#__PURE__*/_jsx(ErrorMessage,{}):null;var spinner=loading?/*#__PURE__*/_jsx(Spinner,{}):null;var content=!(loading||error)?/*#__PURE__*/_jsx(View,{char:char}):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"randomchar\",children:[errorMessage,spinner,content,/*#__PURE__*/_jsxs(\"div\",{className:\"randomchar__static\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"randomchar__title\",children:[\"Random character for today!\",/*#__PURE__*/_jsx(\"br\",{}),\"Do you want to get to know him better?\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"randomchar__title\",children:\"Or choose another one\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button button__main\",onClick:updateChar,children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"try it\"})}),/*#__PURE__*/_jsx(\"img\",{src:mjolnir,alt:\"mjolnir\",className:\"randomchar__decoration\"})]})]});};var View=function View(_ref){var char=_ref.char;var name=char.name,description=char.description,thumbnail=char.thumbnail,homepage=char.homepage,wiki=char.wiki;var imgStyle={\"objectFit\":\"cover\"};if(thumbnail===\"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg\"){imgStyle={\"objectFit\":\"contain\"};}return/*#__PURE__*/_jsxs(\"div\",{className:\"randomchar__block\",children:[/*#__PURE__*/_jsx(\"img\",{src:thumbnail,alt:\"Random character\",className:\"randomchar__img\",style:imgStyle}),/*#__PURE__*/_jsxs(\"div\",{className:\"randomchar__info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"randomchar__name\",children:name}),/*#__PURE__*/_jsx(\"p\",{className:\"randomchar__descr\",children:description}),/*#__PURE__*/_jsxs(\"div\",{className:\"randomchar__btns\",children:[/*#__PURE__*/_jsx(\"a\",{href:homepage,className:\"button button__main\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"homepage\"})}),/*#__PURE__*/_jsx(\"a\",{href:wiki,className:\"button button__secondary\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"Wiki\"})})]})]})]});};export default RandomChar;","map":{"version":3,"names":["useState","useEffect","MarvelService","mjolnir","Spinner","ErrorMessage","useMarvelService","RandomChar","props","char","setChar","loading","error","getCharacter","clearError","updateChar","timerId","setInterval","clearInterval","onCharLoaded","id","Math","floor","random","then","errorMessage","spinner","content","View","name","description","thumbnail","homepage","wiki","imgStyle"],"sources":["/Users/bilous/Projects/umka/marvel_starter/src/components/randomChar/RandomChar.js"],"sourcesContent":["import {useState, useEffect} from \"react\";\nimport MarvelService from \"../../services/MarvelService\";\n\nimport \"./randomChar.scss\";\nimport mjolnir from \"../../resources/img/mjolnir.png\";\nimport Spinner from \"../spinner/Spinner\";\nimport ErrorMessage from \"../errorMessage/ErrorMessage\";\nimport useMarvelService from \"../../services/MarvelService\";\n\n\nconst RandomChar = (props) => {\n    const [char, setChar] = useState({});\n    const {loading, error, getCharacter, clearError} = useMarvelService();\n\n\n    useEffect(() => {\n        updateChar();\n        const timerId = setInterval(updateChar, 60000);\n\n        return () => {\n            clearInterval(timerId);\n        };\n    }, []);\n\n    const onCharLoaded = (char) => {\n        setChar(char);\n    };\n\n    const updateChar = () => {\n        clearError();\n        const id = Math.floor(Math.random() * (1011400 - 1011000) + 1011000);\n\n        getCharacter(id)\n            .then(onCharLoaded)\n\n    };\n\n\n    const errorMessage = error ? <ErrorMessage/> : null;\n    const spinner = loading ? <Spinner/> : null;\n    const content = !(loading || error) ? <View char={char}/> : null;\n\n\n    return (\n        <div className=\"randomchar\">\n            {errorMessage}\n            {spinner}\n            {content}\n            <div className=\"randomchar__static\">\n                <p className=\"randomchar__title\">\n                    Random character for today!<br/>\n                    Do you want to get to know him better?\n                </p>\n                <p className=\"randomchar__title\">\n                    Or choose another one\n                </p>\n                <button className=\"button button__main\" onClick={updateChar}>\n                    <div className=\"inner\">try it</div>\n                </button>\n                <img src={mjolnir} alt=\"mjolnir\" className=\"randomchar__decoration\"/>\n            </div>\n        </div>\n    );\n\n\n};\n\nconst View = ({char}) => {\n    const {name, description, thumbnail, homepage, wiki} = char;\n    let imgStyle = {\"objectFit\": \"cover\"};\n    if (thumbnail === \"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg\") {\n        imgStyle = {\"objectFit\": \"contain\"};\n    }\n\n\n    return (\n        <div className=\"randomchar__block\">\n            <img src={thumbnail} alt=\"Random character\" className=\"randomchar__img\" style={imgStyle}/>\n            <div className=\"randomchar__info\">\n                <p className=\"randomchar__name\">{name}</p>\n                <p className=\"randomchar__descr\">{description}</p>\n                <div className=\"randomchar__btns\">\n                    <a href={homepage} className=\"button button__main\">\n                        <div className=\"inner\">homepage</div>\n                    </a>\n                    <a href={wiki} className=\"button button__secondary\">\n                        <div className=\"inner\">Wiki</div>\n                    </a>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default RandomChar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}