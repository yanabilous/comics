{"ast":null,"code":"import _slicedToArray from\"/Users/bilous/Projects/umka/marvel_starter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import ErrorMessage from\"../errorMessage/ErrorMessage\";import Spinner from\"../spinner/Spinner\";import useMarvelService from\"../../services/MarvelService\";import Skeleton from\"../skeleton/Skeleton\";import\"./charInfo.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CharInfo=function CharInfo(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),char=_useState2[0],setChar=_useState2[1];var _useMarvelService=useMarvelService(),loading=_useMarvelService.loading,error=_useMarvelService.error,getCharacter=_useMarvelService.getCharacter,clearError=_useMarvelService.clearError;useEffect(function(){updateChar();},[props.charId]);var updateChar=function updateChar(){var charId=props.charId;if(!charId){return;}clearError();getCharacter(charId).then(onCharLoaded);};var onCharLoaded=function onCharLoaded(char){setChar(char);};var skeleton=char||loading||error?null:/*#__PURE__*/_jsx(Skeleton,{});var errorMessage=error?/*#__PURE__*/_jsx(ErrorMessage,{}):null;var spinner=loading?/*#__PURE__*/_jsx(Spinner,{}):null;var content=!(loading||error||!char)?/*#__PURE__*/_jsx(View,{char:char}):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"char__info\",children:[skeleton,errorMessage,spinner,content]});};var View=function View(_ref){var char=_ref.char;var name=char.name,description=char.description,thumbnail=char.thumbnail,homepage=char.homepage,wiki=char.wiki,comics=char.comics;var imgStyle={\"objectFit\":\"cover\"};if(thumbnail===\"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg\"){imgStyle={\"objectFit\":\"contain\"};}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"char__basics\",children:[/*#__PURE__*/_jsx(\"img\",{src:thumbnail,alt:name,style:imgStyle}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"char__info-name\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"char__btns\",children:[/*#__PURE__*/_jsx(\"a\",{href:homepage,className:\"button button__main\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"homepage\"})}),/*#__PURE__*/_jsx(\"a\",{href:wiki,className:\"button button__secondary\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"wiki\"})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"char__descr\",children:description}),/*#__PURE__*/_jsx(\"div\",{className:\"char__comics\",children:\"Comics:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"char__comics-list\",children:[comics.length>0?null:\"There is no comics with this character\",comics.map(function(item,i){// eslint-disable-next-line\nif(i>9)return;return/*#__PURE__*/_jsx(\"li\",{className:\"char__comics-item\",children:item.name},i);})]})]});};export default CharInfo;","map":{"version":3,"names":["useState","useEffect","ErrorMessage","Spinner","useMarvelService","Skeleton","CharInfo","props","char","setChar","loading","error","getCharacter","clearError","updateChar","charId","then","onCharLoaded","skeleton","errorMessage","spinner","content","View","name","description","thumbnail","homepage","wiki","comics","imgStyle","length","map","item","i"],"sources":["/Users/bilous/Projects/umka/marvel_starter/src/components/charInfo/CharInfo.js"],"sourcesContent":["import {useState, useEffect} from \"react\";\nimport PropTypes from \"prop-types\";\nimport ErrorMessage from \"../errorMessage/ErrorMessage\";\nimport Spinner from \"../spinner/Spinner\";\nimport useMarvelService from \"../../services/MarvelService\";\nimport Skeleton from \"../skeleton/Skeleton\";\n\nimport \"./charInfo.scss\";\n\nconst CharInfo = (props) => {\n    const [char, setChar] = useState(null);\n    const {loading, error, getCharacter, clearError} = useMarvelService();\n\n\n    useEffect(() => {\n        updateChar();\n    }, [props.charId]);\n\n    const updateChar = () => {\n        const {charId} = props;\n        if (!charId) {\n            return;\n        }\n        clearError();\n        getCharacter(charId)\n            .then(onCharLoaded);\n\n\n    };\n\n    const onCharLoaded = (char) => {\n\n        setChar(char);\n\n\n    };\n\n    const skeleton = (char || loading || error) ? null : <Skeleton/>;\n    const errorMessage = error ? <ErrorMessage/> : null;\n    const spinner = loading ? <Spinner/> : null;\n    const content = !(loading || error || !char) ? <View char={char}/> : null;\n    return (\n        <div className=\"char__info\">\n            {skeleton}\n            {errorMessage}\n            {spinner}\n            {content}\n        </div>\n    );\n\n};\n\nconst View = ({char}) => {\n    const {name, description, thumbnail, homepage, wiki, comics} = char;\n    let imgStyle = {\"objectFit\": \"cover\"};\n    if (thumbnail === \"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg\") {\n        imgStyle = {\"objectFit\": \"contain\"};\n    }\n    return (\n        <>\n            <div className=\"char__basics\">\n                <img src={thumbnail} alt={name} style={imgStyle}/>\n                <div>\n                    <div className=\"char__info-name\">{name}</div>\n                    <div className=\"char__btns\">\n                        <a href={homepage} className=\"button button__main\">\n                            <div className=\"inner\">homepage</div>\n                        </a>\n                        <a href={wiki} className=\"button button__secondary\">\n                            <div className=\"inner\">wiki</div>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div className=\"char__descr\">\n                {description}\n            </div>\n            <div className=\"char__comics\">Comics:</div>\n            <ul className=\"char__comics-list\">\n                {comics.length > 0 ? null : \"There is no comics with this character\"}\n                {\n                    comics.map((item, i) => {\n                        // eslint-disable-next-line\n                        if (i > 9) return;\n                        return (\n                            <li key={i} className=\"char__comics-item\">\n                                {item.name}\n                            </li>\n                        );\n                    })\n                }\n\n\n            </ul>\n\n        </>\n    );\n};\n\nCharInfo.propTypes = {\n    charId: PropTypes.number\n};\n\nexport default CharInfo;"],"mappings":"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"},"metadata":{},"sourceType":"module"}